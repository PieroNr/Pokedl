import{G as d,V as w,D as g,T as L,S,a as m}from"./VictoryRain-rsfJ_ONH.js";import{D as _}from"./Definition-2X73qUs4.js";import{_ as h,o as n,c as r,n as D,f as c,d as b,r as i,b as B,e as s,g as C,F as M}from"./index-pApnUp1K.js";const T={props:{pokemon:Object,isWin:Boolean},data(){return{definitions:[],initialPosition:[Math.random()<.5?Math.random()*30:70+Math.random()*30,Math.random()<.5?Math.random()*30:70+Math.random()*30],position:[50,50],widthPercentage:300,brightness:0}},methods:{centerAndZoomOut(){this.position=[...this.initialPosition],this.widthPercentage>95&&(this.widthPercentage-=20)},handleGuess(){this.centerAndZoomOut()},win(){this.widthPercentage=95,this.brightness=100}},mounted(){this.position=[...this.initialPosition]}},v={class:"shadow container"};function W(e,o,a,l,t,f){return n(),r("div",v,[a.pokemon?(n(),r("div",{key:0,class:"shadow-container",style:D({background:"url("+a.pokemon.officialArtworkUrl+")",backgroundSize:t.widthPercentage+"%",backgroundPosition:t.position[0]+"% "+t.position[1]+"%",filter:"brightness("+t.brightness+"%) invert(0%)"})},null,4)):c("",!0)])}const $=h(T,[["render",W],["__scopeId","data-v-012a4db6"]]),V=b({name:"Shadow",computed:{Gamemodes(){return d}},components:{ShadowSprite:$,Definition:_,VictoryRain:w,DifficultySelector:g,TriedPokemonList:L,SearchBar:S},data(){return{pokemon:null,searchedPokemon:null,difficulty:1,maxDifficulty:1,currentPokemonList:[],filteredPokemonList:[],isWin:!1,searchTerm:"",triedPokemons:[]}},methods:{async getDailyPokemon(){try{const{pokemon:e,pokemonList:o}=await m.getDailyPokemon(this.difficulty,d.OMBRE);this.pokemon=e,console.log(e),this.currentPokemonList=o}catch(e){console.error("Error:",e)}},updateDifficulty(e){this.difficulty=e,this.refreshList()},refreshList(){this.getDailyPokemon(),this.filteredPokemonList=[],this.triedPokemons=[]},filterPokemonList(){const e=this.searchTerm.toLowerCase();if(!e)return this.filteredPokemonList=[];this.filteredPokemonList=this.currentPokemonList.filter(o=>o.name.toLowerCase().startsWith(e))},win(){this.isWin=!0,this.$refs.shadow.win()},Continue(){this.isWin=!1,this.refreshList(),this.$router.push({name:"Motus"})},async tryPokemon(e){var o;this.searchTerm=e.name,this.filteredPokemonList=[],this.searchedPokemon=await m.getPokemonById(e.pokedexId),this.triedPokemons.unshift(this.searchedPokemon),this.$refs.shadow.centerAndZoomOut(),e.pokedexId==((o=this.pokemon)==null?void 0:o.pokedexId)&&this.win(),this.searchTerm=""}},async created(){this.maxDifficulty=await m.getLastGenNumber(),await this.getDailyPokemon()}}),G={class:"shadow container"},O={key:0,class:"shadow-pokemon"};function I(e,o,a,l,t,f){const u=i("ShadowSprite"),k=i("DifficultySelector"),p=i("SearchBar"),P=i("TriedPokemonList"),y=i("VictoryRain");return n(),r(M,null,[B("div",G,[e.pokemon?(n(),r("div",O,[s(u,{pokemon:e.pokemon,ref:"shadow"},null,8,["pokemon"]),s(k,{"max-difficulty":e.maxDifficulty,onDifficultyUpdated:e.updateDifficulty},null,8,["max-difficulty","onDifficultyUpdated"]),s(p,{"pokemon-list":e.currentPokemonList,onPokemonSelected:e.tryPokemon,"is-win":e.isWin},null,8,["pokemon-list","onPokemonSelected","is-win"]),s(P,{"tried-pokemons":e.triedPokemons,pokemon:e.pokemon,gamemode:e.Gamemodes.OMBRE},null,8,["tried-pokemons","pokemon","gamemode"])])):c("",!0)]),e.isWin?(n(),C(y,{key:0,trigger:e.isWin,onContinue:e.Continue},null,8,["trigger","onContinue"])):c("",!0)],64)}const N=h(V,[["render",I]]);export{N as default};
